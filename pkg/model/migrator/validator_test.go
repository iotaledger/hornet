package migrator_test

import (
	"testing"

	"github.com/pkg/errors"
	"github.com/stretchr/testify/require"

	"github.com/gohornet/hornet/pkg/model/migrator"
	"github.com/iotaledger/iota.go/address"
	"github.com/iotaledger/iota.go/api"
	"github.com/iotaledger/iota.go/encoding/t5b1"
	"github.com/iotaledger/iota.go/transaction"
	"github.com/iotaledger/iota.go/trinary"
	iotago "github.com/iotaledger/iota.go/v2"
)

func TestValidator_QueryMigratedFunds(t *testing.T) {
	v := newTestValidator()

	// invalid milestone index
	_, err := v.QueryMigratedFunds(1000)
	require.True(t, errors.Is(err, errInvalidIndex))

	// valid milestone indices
	for msIndex := 1; msIndex < len(validatorTests.confirmations); msIndex++ {
		entries, err := v.QueryMigratedFunds(uint32(msIndex))
		require.NoError(t, err)
		requireEntriesEqual(t, validatorTests.confirmations[msIndex].IncludedBundles, entries)
	}
}

func TestValidator_QueryNextMigratedFunds(t *testing.T) {
	v := newTestValidator()

	// milestone 2 has no entries, so the entries of milestone 3 should be returned
	msIndex, entries, err := v.QueryNextMigratedFunds(2)
	require.NoError(t, err)
	require.EqualValues(t, 3, msIndex)
	requireEntriesEqual(t, validatorTests.confirmations[msIndex].IncludedBundles, entries)

	// the latest milestone index should be returned
	msIndex, _, err = v.QueryNextMigratedFunds(1000)
	require.NoError(t, err)
	require.EqualValues(t, validatorTests.latestMilestoneIndex, msIndex)
}

func newTestValidator() *migrator.Validator {
	return migrator.NewValidator(&mockAPI{}, validatorTests.coordinatorAddress, validatorTests.coordinatorMerkleTreeDepth)
}

func requireEntriesEqual(t *testing.T, rawTrytes [][]trinary.Trytes, entries []*iotago.MigratedFundsEntry) {
	require.Len(t, entries, len(rawTrytes))
	for i, entry := range entries {
		bundle, err := transaction.AsTransactionObjects(rawTrytes[i], nil)
		require.NoError(t, err)
		tail := &bundle[0]

		require.Equal(t, t5b1.EncodeTrytes(tail.Hash), entry.TailTransactionHash[:])
		migrationAddress, err := address.ParseMigrationAddress(tail.Address)
		require.NoError(t, err)
		require.EqualValues(t, &migrationAddress, entry.Address)
		require.EqualValues(t, tail.Value, entry.Deposit)
	}
}

var errInvalidIndex = errors.New("invalid index")

type mockAPI struct{}

func (mockAPI) GetNodeInfo() (*api.GetNodeInfoResponse, error) {
	return &api.GetNodeInfoResponse{
		LatestMilestone:                    validatorTests.latestMilestoneHash,
		LatestMilestoneIndex:               int64(validatorTests.latestMilestoneIndex),
		LatestSolidSubtangleMilestone:      validatorTests.latestMilestoneHash,
		LatestSolidSubtangleMilestoneIndex: int64(validatorTests.latestMilestoneIndex),
	}, nil
}

func (mockAPI) GetWhiteFlagConfirmation(milestoneIndex uint32) (*api.WhiteFlagConfirmation, error) {
	if milestoneIndex >= uint32(len(validatorTests.confirmations)) {
		return nil, errInvalidIndex
	}
	return &validatorTests.confirmations[milestoneIndex], nil
}

var validatorTests = struct {
	latestMilestoneHash        trinary.Hash
	latestMilestoneIndex       uint32
	coordinatorAddress         trinary.Hash
	coordinatorMerkleTreeDepth int
	confirmations              []api.WhiteFlagConfirmation
}{
	latestMilestoneHash:        "NBTGOTKTFWEPWSSCIZZLQTQC9EXVYWLQRHRAVQYDZBZWONCCOFSYRQBXDBYTHTAWJSVZNFPDPLUXSTNO9",
	latestMilestoneIndex:       3,
	coordinatorAddress:         "GLPBYFMNEWRJP9BP9NQHMSOWXGHPCSFQLQLZQBAGKBUZAIXLVQWHLZQBHTGCKMQCXPYWTMPSCXRNXVSHW",
	coordinatorMerkleTreeDepth: 2,
	confirmations: []api.WhiteFlagConfirmation{
		{},
		{
			MilestoneBundle: []trinary.Trytes{
				"WGFXERBWMNYELBYVAXERNAMALYZYQAWEHRDDXALFPVGVYGWHMNNGAWSZPVEBGMNWIITLRAXCLOZ9LE9AAVLJTIBKBAEJAEJKAOCLT9TMZVPXHLTDQMIAPNWACJ9BOGZNPYMMSMO9FMANZWPTQBCPCDOCNSFPIOKUKDZTHWPLDUDUXNJECJOXJTEH9UHQJULSAPPQGXTUGUBNASDQRUKNPRNLIMJF9VMNLI9RDHRBBSFTMRFQGDDAFGUUCPDKRQBRYFDBONP9ULUEPF9PWKBAB9BNSVPEBYHRLVMJELOLLJ9HNRXMMML999EE9VOZYDWEBNYCOLL9EEMZZEGSEXNO9SQQKTTURWYOQSKUYCUUYQSGDIAT9IJLKXFBV9RREOLIRNMVYJRSSTWJXUIFEGVHBUYXZPKYNXWKFOLSYZCHSFAKGJPOPOZASFKDRLONFZGWBIOYUYFETV9SEMFOBZUNVMIXJF9PUPLKSCCTIWAJCNTWABJXGHCX9QEUUEJR9KXTCFWYCFXMSEKNBDMUSWVSIBNRCSPYNHDLTTJTYJWCAVAEKUMPUPXVZF9W9OOESSMSGDBKXHLXBAKSVBTWYMRMMNOIMEDYXOVXLLKEPMGVTGOCXVSDKSZG9ZUWYMUVWGPYGNRTXYNXCTBLVCVGGNZSDKKLDUWUBMXZBP9WTFRICQWAHCZCQEDOMFDZJCTWHGSRLETZP9TXZBNHGLBAHLONFJWO9FLYTKDGPMITSMYIUZFBWWTLDSQVSGT9MYTRAEQOBTHLTQVANNJKFYBALVBPWNRAGEQFFOJBTT9THLNKAWHRYXVVKITMSZPODRJUKZUKKZCXZYW9JNZVYQQTKTSXWIPDXTM99CXMPTSAPJQURIUUPMELWHWPHGYOLZDDAQFLYEJIECIGFGCCHZGPUAYMW9AMNADQOAHHQSDGBUAVABROCONBYOIXXBKVPJXUAEJRPULZSOCAHVXXMHSWYQZHQCTKGPMLKTGKTDAIVMEYDBNKYWEUPNJCNFTJYOGXNPLFAH9NCMJGIJTNCQGM9YOR9DTDI9INDIFNDJETFMREUPPDFLZBYBUFPVW9GMY9NRNZKTCTAWBJNXM9XXILBMHIFCWYGPWLXSQKNCKHMGFKNNUSEDAJBYMRQEXJQNUVFARSTCDMKWPEMDNHOASSLNRDFKJPUXTOGRIOPJZIUMDGYQUTYZWSUMWQK9DQBNM9PDDVWOQKANJWSMFKPJTCFTVUZQKWYFIAWVH9SVSBDKGULJ9LTOYPVOFYDPKRGJYAWXMNLTQXYCDUMORH9NMXECAPYYWIDTQMDLFEOCGNKJMBNQVUWZDIRADEMRIARMNZTRKIHEIYDRUJKPNLSLSDBCKTTQR9KX9AWHCADSEXJCIPAOZVWXBCBEYRJETWLRH9DIHMUC9XJXKRHCZGHZDWOQINGCDBKMVPQRMREHSBUWSCMZEOODD9LYVNABLOXONUFSXYWIANK9LUPIHETWNES9JOGZVBTVRIR9OINCPNNBS9SAULQSVARQTMSHVPKJUNRIMHWRDHECREUQBFSKMDNHWX9WIZYIYKEDZCWMTOVCRCXFMYLGY9IPGPWFPIB9ODZQNLOCKAVAPUUESQ9CXEXIWXDZWYVLFCOINTIF9YXIT9QDRWPUENKIVVXRT9NSFHUGLHTKOQCDMFAVGUCWLQMXPJTAGEEFIZFGTWKVTGYLTESDMXLKDAXWDFKQZPIZPRSPZHLSPPCUCNCRNNKGWTIAMOYJFGYSM9MQPBLVAYEYRLXKCHYZHEOLRVZATXDPCXZCSINXDCJRFPNRKNWLCDWBAFGOQOVUGKADYFCTSJPCTZKWZ9FJTKBE9LUNDMDOINWONMVOSCDI9QRZLPQEMFBHZKNKBKDKZ9RSAXAJEQKGXNV9HQKBXKZSVKSLBXJREP9PYGHKPURRRKDKDASZCEBPBBIOJASCLOVUVKIVJGGBCMDIHKSXEDXIBYHN9WYVUQSTLSQLYFCCEMKEAMLKTRVB9OU9EAMNNZKJPJYIPDINVLWBPZJNCJYMOEUCYCTUVMPYVW9TXV9MDKYXXJJDCPBHBZOGRV9OOEIHV9VIRA99KQGAQMYZTLFAQOTMEIIATEHHLOHXGUQE9OSQNSCJVOQLTKOICYTBUAIRSJVKCEAZGSJDEBSVS9FRRDBGEQUBHEUA9OASPJT9LZUWCGLPBYFMNEWRJP9BP9NQHMSOWXGHPCSFQLQLZQBAGKBUZAIXLVQWHLZQBHTGCKMQCXPYWTMPSCXRNXVSHW999999999999999999999999999A99999999999999999999999999QXX9NED99999999999A99999999LIMTMOPCDCM9DOEIIUPKFYGYYZSQQSOMWPZ9MYFVWORUKUXRTUPKBRBRRFYGYMBSJOVRIHVZMVBCXPWFXIBPNZEFNVHRCARNQFZTWJAE9BZRZWDEY9SYQZHBWHJOCNXMNBUMXAGQFJLYRGQGMUVTRGMLSULSOKSOM9999999999999999999999999999999999999999999999999999999999999999999999999999999999A99999999999999999999999999YVHSJIISF999999999K99999999ZSA999999999999999999999999",
				"UINAXNJAXZ9FQZYKRPEJELBZG9TMFXEQDNDPXGHIVJZCGABGIOESHINQVGJWJDTYDIGYDNZU9MFV99PNXUNAKFHHMRY9HKKVNBEUAJUNOUPOKOR9RRB9XZVTCPFPHHPAVOUVAZANGUCTEPQWDWTPORSGMENZPNMFZBWCPEPBRCXXHAYYTYEXCWSETBIAQCNDFBMZCYZBCWHWC9NE9YDAZCGZ9AVAJCI9AWMALDU9IZSZL9REAYNANYMAXBYWHBJWT9LYJVYAPBF9JV9CEAWCEDQDOEA9TZHVXY9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999GLPBYFMNEWRJP9BP9NQHMSOWXGHPCSFQLQLZQBAGKBUZAIXLVQWHLZQBHTGCKMQCXPYWTMPSCXRNXVSHW999999999999999999999999999A99999999999999999999999999QXX9NED99A99999999A99999999LIMTMOPCDCM9DOEIIUPKFYGYYZSQQSOMWPZ9MYFVWORUKUXRTUPKBRBRRFYGYMBSJOVRIHVZMVBCXPWFX999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999A99999999999999999999999999VVHSJIISF999999999K99999999CC9999999999999999999999999",
			},
			IncludedBundles: [][]trinary.Trytes{
				{
					"999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999TRANSFERQBPBAXPDTZ9CKZHWXZBYIZNCRXKAJDPBLXJDXDCWWZYYI9UWZXSYYZLWPWWYGCMBGYXDWCRW9ATVXB9999999999999999999999EA9999999999999999999999999QXX9NED99999999999A99999999YZOCGNQBABCJLJFPLPWTAHKVLZXVCIICGHXIPNKYHGOLKKDAUAYUIXXLOKEDA9EJHBLOIDP9CJDJEYB9BOPDHYUVWFECGRKOBINHXRSFZJXGRYZLSBTFQUHRFMZMXOPLHJQETWCIHWJWSQLVSNJKFZUKJHBEXQZFA9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999CUHSJIISF999999999K99999999OPA999999999999999999999999",
					"DQHKPTSBFRQRFINWTGOEKYDUPJBLETKHYS9SLECSWRITEYHOVUOCATLEECECREQSKFNLIAFCNDIIS9KDCQQRIMBNNPOEEWVQZQAXFFWVLCYNULSLHVR9XDPAB9IAGBXPP9QXNWNYKFHGOJLVXSDCPYPPTGCXVQWLVYWRRJZXTQLPZOJJSKRLVPCWLLHZWJBTAIUFWBOOQOZIY9UQUYQEWMDSMUI9UZDWVQSSWKWTLBZLRUSBMG9AQYIGGHILPRRGUHKTENKSXFJASUHPLQFUUFLYBFOAATYOFKBPFZLTBQEUOOQHPSUWM9WFGR9HTEGUDAMYDLGAMJJFZO9ATXAIXMUVVDNNYRU9NYMOQXHRCVU9IUCVBZDWTHYBQYSMOWCUSBZCAKSQUSPKPMKRLFYIBQKBCFBDTEUAPYTBORIDENXOTHLFRCZBCZQPZHVFBJZCEOIHPS9YQWZWXPQBQFGWHO9BMKQFYNNDAKGTIBUBLFJXTXTRHMMVUJRPVRATCXZ9HNCQPXUNFDOMSLFJF9EQMZYXMCM9DTORRASZPUCA9SXLQ9NFBXEPXP9JJVBMKPTGSNPI9YNSHPPKDFLW99GRQGBNCQMGDQSNYOCELQOJMPFB9MLZDLFQHEDBQZOTQYLOHQQWKARAFOVDNUUMF9YGWJKNIAYSQAYVDNCDCQDIMKHGKBEKJESQCOUCSSLJBUMPMKIHTGNKRAMVQXGAWHXSWWYQBRQQLUOKAQXHFGOBJHSDOZTMAFEWPCNILRMACOESLRPJCHUCRULRECVRCTBTDSOUKTLCYRSPJOZ9JKEJDYYIKKPPXSOQUJZDNMZZGPCK9YSIUWMMFFVQPNBNQE9ELJFFGV9ICWCKNRNLQMEJITWHJDKGFBEPBYSGEOAMPUYUNHIZEYBKYPWMXJKLIVL9HQUHNZWGS99OGZCLTOXXI9EPMGOUTN9YHBYSPYOLWWSMLZW9AIPMEHWXM9ZRF9IJD9TJEF9GS9BBOELTJRRJCAAZABGSTFJDKNJQSATEKVMUTHMG9UIAWZFUCHSUGRBJDRHMGKUAYXFWUFMMOVOGINSUYXTCHBAXPEVPZTOVLZMHSLBLJJWOLKLKOGUPONHMDCHAEWMUY9DVTOUDIXKYDJ9BDBXAASIZJXSCXZAGVJJGLOJDJMZOAHJWSPPSC9Z9NBKJTBCVCJDNENGHTNJEHVWT9ENRMSPMXCUIILVFRTWYJXQXMGMECQCJSUJTVCHLXSYKRCAUFSPKYIHWUCEATXZMXVVGOBNAMNXECDZOW9VPFQZQYDKZUXOAZRZXFMLUAJJOMA9ORDTXLNWDPCQDPOPQTKWWEWFXJBZXKCJGJAVSZPI9KNROTYW9WABMTVHCOEDVW9DTGHGFYBBUQLPYTQHTDL9KWBBUKGRHIJXGY9LIJPXVBATPDNAX9QONUMBIYMTJYXCQWZKGUSSGUJBUZLFTMBONEATZYGXYZXCXOLBFATHKG9QNFKOD9OHUVMCJAPHIFJDRPHODKNXISDZEZXLJTFGDYCSCTTVEWFIQLTSULSWZUZXNGUHJGVMANPNTGKVASSDSOMIETXSIFVJDLEHUIBPOFOKFRADQE9GLZRUUAD9GDTLPXZTNSDMNZHKDVP9PDZIJCKFGWIWZVAEEPJB9IDZDPDSCXUOZISOGXY9YSGJHDEVCYHPQMYJXUJBS9QIQCKQAIBPZANMADQTUFKWPDELNDFNFDDUJJTHCLESRWYCQWBRXSRINJPUTTSRCZRPVONNSGXXFYJZSLNNMFEATDXJWQDPMJCPLQKXVTLZZPGJFBTZOPBFY9OOUZXDOCAEHMHVMCUKTDPBGYOMSTOWKHIQOGDQ9U9RXPZDEMYN9LLCDC9YDSGWXJJIPKUVHKQDKQXSOLPMEF9QZHDCOEGYDIUUFYXMAHBTT9GTIGJCKLROSHQGPJWCHLVZRBAKJLLHXMIGCPGRHHOXYHODZBTOMUXXVKXMAKZCPFTKNENDWPROZUKOVNLKPEBD9WQPGWUSKBCNK9FYPZRTBFFDV9PINO9XGAMQXPZK9WHUUUW9XWVSJITNZ999TNINYSQNDRASWNYLTQDMIEWLKDAATPVKHXLRTRWELVITWHXODDGTJSGOIMNVABLWM9QZMXYBVOKPUCWTRPVWZPSJWTH9WHFZBWFCJKWAGOQVDOMNDZSROTYNLFDLJGDCSXICDMVCXYWUSZMHPZEDMWQIVXVKFBRJQPYLIQAFFJLBA9NHHRUPEOPGEJKHDGERBMMHHKKTVUEENJPEAZGECY9999999999999999999999999999999999999999999999999QXX9NED99A99999999A99999999YZOCGNQBABCJLJFPLPWTAHKVLZXVCIICGHXIPNKYHGOLKKDAUAYUIXXLOKEDA9EJHBLOIDP9CJDJEYB9B999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999AUHSJIISF999999999K99999999IRA999999999999999999999999",
				},
			},
		},
		{
			MilestoneBundle: []trinary.Trytes{
				"D9GVVYUVMNFJQYFWMJEOOAYXNESAUPAABZLSZGWIPKDWAYTNJKHTULJE9LBGPEIJGTXIVNPPKUAKQMBABCAPNRTBTMSTYHTIGY9TZJDFF9SMWESXIPYBKKFOOSEXOVFO9WQXSAOHM9FKWQNPINYYGVEQS9NNPDDI9AGFYEELGXMDFWVKXUNXCYNBBDJFMDLIAPXMCEWEPNBDCLAPSLCABRFFBPZGXYU9TIGATDVAMTIFINYJUZCHWANSRXIBBNJMTAPNPEXJPYZFFBESFBDFTZA9IMFKQTYTFKNAJXTCTRMITGAALQUQWXKJLLRWNPEMTMW9ZRVZEODFHVPGHWS9FOADYIPBQXOWYAVBYFBUWMBQXGRETYCTJ9LRBDVXCXSQOYGGLPCNLANIGADAQJKFXMHZSPPXWDCOCQGROFXXOIIZJWHVXIIJHZJPOJSSOLXLR9BFRHBWYM9IQJQSDQYGNYQIGUCZLYIQBDQXGBZTRLQIKOP9GADEEONKFM9PNQGEQPSFXNJ9MDOGKAYJMSWABLFSTWTIONAHRMIOBUGYTAXTZULHARMDFMZAXMONXWYSIRKYPUVEZJWVRSSMCVGORDEUKOOSGXGKNJEHUSBITUCWEI9JTYOAVQJDMHHRLOSHMMVEWXOWSQXGYSERKDQOXXNOLZBABLLPCTTYKCFUQPEUVKYL9QEHYHIOF99CGQT9ZNHPTNKXQYXIBLCFSDZALMSCYSKULOJMJHH9FGXAKEQYJEWQ9XYDXISM9QKQHESAOKWSEXVZAWNYC9NLONJIVPKNPXIQTERYWQJUOWLTCCCZAEHSALKQHBZKUKF9DMKBOZICOVSRUHZ9Q9DSMBTTEVEEXNKPBBH9KZTMWXRKRVNNEBFXZHXDRHXXBLCYHFOOZAEFVWSZCGTEWUIGPPQCYJPSSJLQADWFDRPZQGUDGDWVOGRDGWQWKJQTKTNPPHBSLLMISMASSYH9QPDYXPWJTMKFS9YKN9OZ9HGYBJUISG9PEOCCSTMVN9WNZWILPPXN9VGQNXYSYCEPFUAN9LTLRAQUEQCPDEANTIWM9AXJSGHOGVJSRHRU9ITCJRFZLBYYEJIARNPPT9JVFLFZTZUXEKXPTLG9O9GATERSIERREGBSBAQZNYQQZHOIKKBGFXSJYTSS9SXNKQDKXOSVIKIEPZNHARI9FZOLPYXILDLAPEQPJVYYGJJLRLE9NKXXNADOUW9OLL9UZDSQQCKWYLZ9HBLGFEGAWTAVBYETHBHRAJYAQNDQMDJF9XJB9FKVVCYOILQ99BIXBFJVQKS9AMWIRPRCUGSUHTLHNITUAQJLOQOOPUUPQRPODIBPGAUBEXKXX9YDLFTZXVRQCQKDXUDXOTQW9OIZURDGZUNWDOPUEMFSMCHYKIJJ9PHIUKQRTTXZSHIWLSUDXHEJGZYNH9HOKISSIEQLLNJAFPINVSJQWUSGKVKYGBOQCLEWSJOJ9AQPYXQA9WNWKUEJLOXDSHF9U9O9NSLYJFBVJTYGPHD9TDRDXBQA9EEPQVFYVAESGHKEPQWGZPFJHUVJROBHVMVNZRLJMLT9TNVUEWWRLQUWMYVDBPUMNIUTTXZAUXEZXTUAVCAXJPXGQCSEYPDFRTRXWBUGFVKJQYBPBVZTXGYOLSZS9JZVIXFVHFFJPEYBMNFLUISJOZGPBHQBU9BSDVZGHXFFRLNPLUUMDKGPAIKOWKS9MQIUZKRRMMGOTEPXBWFCYTOGFACEAETVLHOT9C9MKGBFFPUQ9PZEVXKHNMMQNEHJH9KDS9GTZXYSEUPEZXMLGYKRCZKZDWRFJJICLXXTYLJLRUSGDMMPBZXHHRXIRHAMJYAZYM9KZOQVGVXFJZCXBE9EJBAWQIJQGECHACGFLGIMKMQSRDFFR9KADACYXJH9ROHLGJMJGLVEJGCNBYIWYRBDPOZLEKQCWGJXHYY9CDV9DGCMBNDDFQLDSKMZPRKTBXBHA9DINDAJCAACETHWGYBULMZKLDXTYWUEVBIEXTBVYEANGITULSLXJQXMCSPRNSWPVDGOIVXYBAZBSWSBYMQCVUPTMGIXXLCMVBGAXBH9DVP9VYDLBLZEAFMPKIITHJFDUIBFZGYFDWMEV9QPQHEKTJVRZUIVQULNNHOBWOCKLEYBOWOZLB9WJHVTCIMFJUTPXOCTYCJMSGREKWCVWHS9ZWMF9OWGLPBYFMNEWRJP9BP9NQHMSOWXGHPCSFQLQLZQBAGKBUZAIXLVQWHLZQBHTGCKMQCXPYWTMPSCXRNXVSHW999999999999999999999999999B99999999999999999999999999QXX9NED99999999999A99999999DLPYUIWKGNNGJV9MRCISSAZ9QGAUQQTUIFLQGEUPQWSJTNBXFQBDWNM9WLNPD9KUORVFQZWDXSXLUKUI9DDBVFEPQXQSXSJUZVGJYKPLTDRJWNVVIUVKQBRLMRWYHVYUOJWAMECIGCUBVELIZXWDDBCWKHZOFIZ9P9999999999999999999999999999999999999999999999999999999999999999999999999999999999B99999999999999999999999999BVHSJIISF999999999K99999999VC9999999999999999999999999",
				"WFZHRQOJTHUHIPKWIDSOHXSCDAETPRDCJQPDIZRH9MI9DMYNH9ZMEUFPYVEKOMUDEYSB9DGMTITNPZYEDCK9LOSKBVKVSONNV9YKF9BWAYHAYJETRRFDGGWZGCWRPQURC9JLETUDPISNPMBXFNZR9EAEFNXHFH9VCWLDYDB9R9LBA9HCC9WYWYX9LVJAACHYFDXWTBQCJBWZGCQCPDQWMVXZWAR9DACCYAHYMCPAVB9XIZGCBCSAPWSDNCZWXCAXUCWWDBWDJCTARCHXDCKYCDDDZAY9GWXZDY9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999GLPBYFMNEWRJP9BP9NQHMSOWXGHPCSFQLQLZQBAGKBUZAIXLVQWHLZQBHTGCKMQCXPYWTMPSCXRNXVSHW999999999999999999999999999B99999999999999999999999999QXX9NED99A99999999A99999999DLPYUIWKGNNGJV9MRCISSAZ9QGAUQQTUIFLQGEUPQWSJTNBXFQBDWNM9WLNPD9KUORVFQZWDXSXLUKUI9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999B99999999999999999999999999ZVHSJIISF999999999K99999999DC9999999999999999999999999",
			},
			IncludedBundles: [][]trinary.Trytes{},
		},
		{
			MilestoneBundle: []trinary.Trytes{
				"NGPNBYSNFYARKDTRTHXZAOHLYQMENERPDRSSMKUCGULTYOQIOSFZAR9NLMEOBDUIBPSAVBBJZF9DZROTBLLMVTVRNHPCN9ZVUCSGXYVKFIOSPONRN9SRWIGOWJEVFWGPMUWAPYLIAAPPKBHMCMXQKOI9SW9IYSAEXCHTPTMZFGPRXHGNOYTMLHTRRBZCPYBEFKYLPADAEPFWIPIEVVU9PTSQEZSC9ZMLSBGYMMDIIDUFP9DQKDXVWZMHIAP9IKE9SZCDAIMAMYYTWKHUBATHKSVIP9IJNXBVOJQFYLCGN9NVQUDJKLYZRW9BZT9OCLTHGITBOIB9FMJW9THXLXUUORP9AQ9YVERFPCFPCUNTVI9J9KOSMYLYHPINS9PACCNVRMKIIMHIWVLGHWCZFPONXBTUGVLQKYNGC9HHVNKP9NGOACSTAZXSTGZZJOLTNHCNVWJZTUECPLHMVTZDBVNGKFNAUWVMIQLFTKWJ9XBGQDJP9OSJLYBBGZBCFHCCI9OTEMIKMIUGPIWHWJXDCMZHPYIHDLARCE9GSSDMPPCIBKOQSJESFBGXTECSNTAXBXJRMBTTKAJCSIKORBXEWLAVIQINVVJEXVCG9NTWEJWYAO9MCURCGSUJKXGKKSAAUXLLXBLCWYSAYNI9AOE9CE9CMQPXJJKTDDEHXYQGSMSSVEGAFFTBMTNNKEWCUA9XBTBZTIHBFMQPQCFRHQAMXSK9AMPJWBZVTEDIZXXKD9OD9EWK9VUZPSAYLQILESBYZNGK9FBYTDRPNWQSTXSXMYHRIVZKBCKLGZZBTHZTBE9CKX9PRWB9BBYPE9FIYLYGJ9SQHOPPRICDINPXTSDBNF9T9EYIEYUAQKZRWKQ9URTQSDADH9BAFWQZVS9FQAWZN9SIE9AHZOWPS9KV9FQCOLVBKN9DDTPHVZBEZDVLAENXL9OKR9QDRHWIPYJZBYDULECZX9ZFAQCQRQZ9GTGUXRPIOJVXGLMVCCNKIOTQWCTMSHTT9ZMGBAOASLVUAJPU9LVFTMWKTSGUPXCINONWJJLFOOMSRRHIBTRGUNXN9CAGI99IKSOWYYZMRT9OJWVBGUBQLHZOQTKLEEUCOKATRQILRPXFDOELIJHFFLB99KVINBHNSCLWFPSUNGJXDQZXIEVYISQODWPNGBDYVBXSWJMMHGVVLLMBQSWNQNCNOWC9RWLXMEQRXVPZA9OZUYKSNNYITGD9MPKAFHLGCKGLXIGRJKQFHCFOYRFUBCSWQIUXV9ULRPZVBMUNRCVRRUZPDXTUJKWDBKWFWWEDAFRYLAJ9IVTNFKRHURHNRPLFQIWNBMJCDVSH9XOXWYBMLIMDUDMVTJHVFSIBGF9IMZZGGCIUAHTGTOEJIXTYCWOMXSZECIZO9VBAOGGU9SPCBHTWEYBHPXQAKXVEPGCBDPLBIZLAXRHQLGRWQXEDUTPBUGDPONWXSNBOOYOXOWHCGUT9WLOKDDESVIL9LTXGGBFUPSRCOXCHOPMU9E9VOUWKNC9PJLMCMMLCIVUMVZZC9CGQZ9IFUMBVKQCMQZORTOUFKOLRATWAQNXEJQTCCONAURIICHKLGRWYGJEZKJAVNPVGDOVBQKNXGVTCWRBJOJYJAZQCWABXNYIASUMXWANTQSMBTUWJLCNVBKI9DDBNNXGNUERRZCJNBKDDMKNSYIAONLPLQABURNJAHZEZHCTJXPCLISKRI9AALBFXXALKLMXYUDHAEJDSZ9AELNVVKLRSNPTJWCNOJLAC9LQEXZYWTENJXPHEI9IOPCGYZXEMKL9KUAHAQQWZTDRAZNAXIYVYCFMIFTKWMTHIJVJME9WVOGLXZMHEZRQZGVABRVRXJGVQRCF9SVEECHBFJMFDOTEIQXMBXNNUYIGSCRJFVQADXHK9FJEJQOK9S9PMHEUAGHNDCKHOAHYIQSIIIEOMV9JS9BQSLAE9UHMQXITXBWSXNSAEYZBDJYOXJVWCKBWGZILSDBLMOVGNZSBNPNHSSJEJMVQVIFYVLPMXFSCBIHBGHFXAANOKH9RQJKZGEIWKZXK9WSAFFZDBDUDRJCGEYW9SHWERIPYQEBJHTPYWRTXFRVPRVUSBELZLTTJITQHNXYQDRDLSGKGHWVWWV9ODUQPN9KOEWUXZP9MHFTVHZLUDIGIPQXITHCBRDSOEVCCUALQME9DOOPFV9CTDQGXGLPBYFMNEWRJP9BP9NQHMSOWXGHPCSFQLQLZQBAGKBUZAIXLVQWHLZQBHTGCKMQCXPYWTMPSCXRNXVSHW999999999999999999999999999C99999999999999999999999999QXX9NED99999999999A99999999FE9PIDRXBKRXKEWJLUVF9MJS9UAGXKASLKCURDQFTJWYVKKAWNXNBWXPJSZUXEGJOXBAWHMQ9XZJDLS9CNPJFMLPOKIWANXKRIBDXLTUIKKFP9ZLNTDXDBQCFPRFTWSHQGBJZHUPXOXCMMBEDR99PQKJOFGBFLAFT9999999999999999999999999999999999999999999999999999999999999999999999999999999999C99999999999999999999999999GVHSJIISF999999999K99999999LOA999999999999999999999999",
				"VHOMPPUCLRQFECJFBWDEOMBKYBDIMEDGCFWRITKDIAVTOVNBBOXMVTAUDKLGYVZPYHWCMBINTSFHDC9KCCK9LOSKBVKVSONNV9YKF9BWAYHAYJETRRFDGGWZGCWRPQURC9JLETUDPISNPMBXFNZR9EAEFNXHFH9VCWIBUXODBBH9YWWZQBBZECGYGBNZDYQDPAYCLWADUXJXPXWDPEDCFBOCT9VXBZJXTCFWDZGXJBHDTYR9NEKWMAHYZBYXHXMAIDUZDXMWZWHAMZGVZWNECXUWUWKXGZQDQD9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999GLPBYFMNEWRJP9BP9NQHMSOWXGHPCSFQLQLZQBAGKBUZAIXLVQWHLZQBHTGCKMQCXPYWTMPSCXRNXVSHW999999999999999999999999999C99999999999999999999999999QXX9NED99A99999999A99999999FE9PIDRXBKRXKEWJLUVF9MJS9UAGXKASLKCURDQFTJWYVKKAWNXNBWXPJSZUXEGJOXBAWHMQ9XZJDLS9C999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999C99999999999999999999999999EVHSJIISF999999999K99999999OA9999999999999999999999999",
			},
			IncludedBundles: [][]trinary.Trytes{
				{
					"999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999TRANSFERJ9FWJCCBMBVWIBDZPASEXXOZPYADR9QCFCDBSWZCZCUYVDO9UZBYWBNZSBZBODS9NWLBGYMB9SFNEZG999999999999999999999AC9999999999999999999999999QXX9NED99999999999A99999999HYUQK9KJNNK9GUWYPRZHNJHBDDLIHIBABZDVYYGPKDZWSQAHUFWGUEDTAIAFJASTKUWSULPNSKKJRBRDDLCKFDCCKXHFIMJAALVNVRWF9GYXYZXLUVAHIIXDYAIGC9EDECQG9YCCZESQYRZRVHBIPEPJFMKWTFQ9Y9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999MUHSJIISF999999999K99999999QRA999999999999999999999999",
					"JY9IJHTG9BPTUF9L9DYFWBIRVSSBVJLNBAXLEXBINVOMWPSZQBAQHJFHFKZVEMMXGWQZOGZHIUCDORDUXNNCQZKFHYMFZIKOBHWIWUDYQDFIOBVLSIQJMINTJCFAMLZNFMMO9OBHWOZURHOZSCBPZQUCRJVLFMKMYDZEAPB9DJH9RAGQS9JQICHNLUUABUJWNBKBOXQQQTPCFKPMFDMYC9UAYVCHXAZXUFZYSTYI9TTCOLEDDJYDTGUMAAMJUCVZGJOHJEHKYASFMYLTQCOVYDAJABQVYZZVPKHRLZXYIDLOIETAYRWY9RPGJGYEDYYJFBUW9XLOOOUZCLVLEPVMX9LGYEYVIDDFVDZHDSVSQZJDYHMOMRAFAWKHDCUHQGUFDLJYQ9MVKWOYTCYNRAHDBDMGFUCWSXCUGUQRMCF9BOXJRYFUATJMHFRCYAXPZQDCIADBDRTRQFQKSWWDCNOQXIGSLDLALXQFZHXEXCX9WTVBOZBSFNUVYLWKJHKJZ9EPKGUUSUSZYDW9NWOTTXCCLNKTSREEJW9TJYTJJBTWUCOQCYPNLXJDHHWR9PVRNRORXQYNQDZGZZMFMCXM9OTJIBVRBKAYIFECTDXL9NBDWEZJ9FNXWUHMHFD9YOKTTHTGCDPGRPLATOXVO9JVZDARPXCVXZMECZPVERLDHFAYWMXRJNDVVOKFVR9TZSUPKGAARFWOADLZOKUVENXGBLRKIWG9DCXXNSKFZICQXIXGDWG9KPGJMUICOEMKXWUQN9WNCRXXYBUOFYUTO9UMNQABMQYKZVMDMSFBQCCBSFXDZDGPIGP9LQINYQBJJUIQCPFZNULIKEUXZUONWOR9AQIDCVK9HNNEBZBNRLDMTKRDTYTLGCSDICGIDTMKAMDUHUDOZWRAIAUIMGMZANDDJATMONAPASYMALRAJKKZMLBQSLQHVGBTD9MQNTZAMGWBRDONBHTQT9UBJMXDVASHHJOEIAEOLITQVEJTI9ANGRPQXXVJWUSHOUFKLSZQNLVRHMRSUCONPKXAKUSKBMTILUKCXGFX9RUDYPGXIXEPGSENEKIWSDQPVMQKMQW9NCBLCIUNYYRETOSCYLDYNRFCQCJOCMSFCOUHPDWWIJTVJQPDXVJEUXWEPAVSFENNGNKKPBGMUJKYM9SYEDME9AOKYVZTGEXMBMFTHABXIYAUDMAYRLPYCGNOCBLZKKQZUBMTLYXWUORCJFCGDLRWVLLNZUAJHALMFBGWHFDDPZRWGLSYYUZXMGLDCLIVQBEXCDWYKFLFRXSHLJXZCKNJIJR9QYVGMTTIAMYOMIHKKAVHPDTGQOOTKZHBPROBUCCDLBQTS9TIG9YHATYZVXBOSRSGQWXQGENV9RCVXLEAWGMQQRBFQEONLHQXCCAQPATVFMRA9GCLBRYJHMINKEPPSUZITORMBJAMSMGRHYCEVURQFYWIH9USMVPSEZMVYFCGTPOJGZOPEYIEDVBE9KMIVKMLGUNQZUEGAULWPHZLPZAOYLPDKUIFNO9VIROEQKLQPLIWXLRHRHCYORGEFMZCVOUWNGUDTLHIWHGCJRMFXQQNMZECOWRKVWKUCZQRXJ9Y9ALNMXWNM9YREHQXNXJ99PJPUWRXWLKCYBXENLHTHAFCALFPYOCHVLRLGCYUAOZXTTAWVOFVCOC9ALSTRLXRYANHTDGDABYBJVJMPXQMENRGDAEKEFJROYGXJAXRKQTMKP9HYVPOJLIWVLOUYYNORHGCJROTVKJBQAYGECQ9RQXJAWFE9RHUFNNFHEZYKWVIHOLLVYWIM9ZRLUOXVNMIMXCADAEUMDHGVQGJXPYSWEXZYVKRUPYJVELLE9CYWFOCEWQOYENEJWHLLBZOIV9YOMWYDRKSNVCWOCWSZFGMMENGHMFNIKUFJWHEKNQMXHLHKEORRCAIYNLOZHRMLXCAYZLMUULJYKYCAZGPSXZ9ZF9MASBTKZGWUPZYW9TUWAWFVXNAPSS9VZDSKQIABVQPUOWJSTYFLBJKGCABOKKCNDFFFCQMCCZDLXZCZCLVHWXNDBZZKLAUBVYRXFTKYUEUWHWCMNGNRGFVGUBXUHTDVJISMOGAGDCBSYFIGQUNLEXZSDRVFRTQJJVFMJDFRBCPEHHVPVTD9XJOILAZWSRPDVKYCNGOXADNKBQIOPENRRIZAQY9WQOSIRVFGZWZ9GBBZBGSWGXLIKDGMFYUPGRSGIKJQWMMFJNONPLEZQVQHADVGRDRBKUBB9RBMMHODVJV9ZOFEDUQPZGRPUXAHUMVAT999999999999999999999999999999999999999999999999QXX9NED99A99999999A99999999HYUQK9KJNNK9GUWYPRZHNJHBDDLIHIBABZDVYYGPKDZWSQAHUFWGUEDTAIAFJASTKUWSULPNSKKJRBRDD999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999KUHSJIISF999999999K99999999XF9999999999999999999999999",
				},
			},
		},
	},
}
