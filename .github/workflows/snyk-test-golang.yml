name: Test Golang dependencies with Snyk
on: [push, pull_request]
jobs:
  security:
    # Skip if this is a PR from a fork
    # Secret variables are not exposed to PRs from forks
    if: github.head_ref && github.event.pull_request.head.repo.full_name == github.repository
    runs-on: ubuntu-latest
    steps:
    - name: Check out code into the Go module directory
      uses: actions/checkout@v2
    - name: Run Snyk to check for vulnerabilities
      uses: snyk/actions/golang@0.1.1
      env:
        SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
